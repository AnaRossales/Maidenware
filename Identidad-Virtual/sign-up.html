<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="es-ES" class="supernova">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=1" />
    <title>Formulario de Identidad Virtual </title>
    <link href="css/Estiloformulario1.css" rel="stylesheet" type="text/css" />
    <link href="css/EstiloFormulario2.css" rel="stylesheet" type="text/css"  />
    <link href="css/Estilos.css" rel="stylesheet" type="text/css">
    <!--<link href="css/style.css" rel="stylesheet" type="text/css">-->
</head>
<script>
    window.onload = function() {
        alert('¡Bienvenido/a! Gracias por elegir nuestro servicio. \n Para poder aprovechar todas las funcionalidades de nuestra plataforma, te recomendamos crear una cuenta. ¡Es fácil y rápido! \nSolo tienes que llenar los datos y hacer clic en el botón "Registrarse" y seguir los pasos indicados. \n Una vez registrado/a, podrás disfrutar de todos los beneficios exclusivos que tenemos para ti. \n¡No esperes más y se parte de nuestra comunidad! \n- Equipo de Maidenware');
      };

        //Esta funcion sirve para comprobar que lo que el usuario inserto en los espacios de Facebook y Discord realmente sean links 
//Aqui lo que hace, es que valida todo el formulario y le mete tantito rollo para que el usuario no pueda hacer inyecciones de sql o cosas por el estilo o el mismo HTML
       
function validarEspacios(event) {

  event.preventDefault(); // Detener el envío del formulario por defecto
  
  // Expresiones regulares para buscar espacios al inicio y caracteres no permitidos
  const regexInicio = /^\s+/;
 // const regexInvalidos = /[<>''"]/;
  const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const regexFin = /\s+/;
  const emojiRegex = /\p{Emoji}/gu;
  const regexDigitos = /\d/;
  const regexSeguridad = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
  const passwordInput = document.getElementById("password");
  const confirmPasswordInput = document.getElementById("confirm-password");

  // Obtener todos los inputs dentro del formulario
  const inputs = document.getElementsByTagName('input');

  // Recorrer los inputs y validar si tienen espacios al inicio o caracteres no permitidos
  for (let i = 0; i < inputs.length; i++) {
    const input = inputs[i];
    input.value = input.value.replace(/ /g, '');
    if (regexInicio.test(input.value)) {
      // Eliminar los espacios al inicio del valor del input
      input.value = input.value.replace(regexInicio, '');
    }
    if (regexFin.test(input.value)) {
  // Eliminar los espacios al final del valor del input
  input.value = input.value.replace(regexFin, '');
    }
    if(regexDigitos.test(input.value) && !isNan(input.value)){
        if(emojiRegex.test(input.value)){
        alert(`Los emojis no estan permitidos`);
        return;
    }
    }
    if(input.type==="text"){
        if(!/^[a-zA-Z0-9\p{Z}_-]*$/.test(input.value)){
            alert(`El ${input.name} solo puede contener letras, números, guiones y guiones bajos.`);
  return;
        }
    }
    if(emojiRegex.test(input.value)){
        alert(`Los emojis no estan permitidos`);
        return;
    }
    if (input.type === 'email' && !regexEmail.test(input.value)) {
      // Mostrar mensaje de error si el valor del campo de correo electrónico no es válido
      alert(`El correo electrónico ingresado no es válido`);
      return;
    }
    if (input.type === 'number' && isNaN(input.value)) {
      // Mostrar mensaje de error si el valor del campo numérico no es un número
      alert(`El valor ingresado en el campo ${input.name} no es un número válido`);
      return;
    }
  if (passwordInput.value !== confirmPasswordInput.value) {
    alert("Las contraseñas no coinciden");
    return;
  }else{
    document.getElementById("signup-form").submit();
  }
  }
}  
function mostrarContrasena() {
        const campo = document.getElementById("password");
        const campo2 = document.getElementById("confirm-password");
        if (campo.type === "password") {
          campo.type = "text";
        } else {
          campo.type = "password";
        }
        if (campo2.type === "password") {
          campo2.type = "text";
        } else {
          campo2.type = "password";
        }
      }
      
      showPasswordCheckbox.onchange = function() {
        const campo = document.getElementById("password");
        const campo2 = document.getElementById("confirm-password");
        if (showPasswordCheckbox.checked) {
          campo.type = "text";
          campo2.type = "text";
        } else {
          campo.type = "password";
          campo2.type = "password";
        }
};
</script>  
    <form class="jotform-form" action="oui.php" method="post" onsubmit="validarEspacios(event)" id="signup-form">
        <div role="main" class="form-all">
            <div style="text-align: center;">
                <!--Aqui nuestro logo y el header-->
                <img src="https://maidenware1.s3.us-east-2.amazonaws.com/Logo_fondo_blanco.png" alt="Logo_fondo_blanco" width="60%">
            </div>

            <!--Aqui la sección-->
            <ul class="form-section page-section">
                <li id="cid_89" class="form-input-wide" data-type="control_head">
                    <div class="form-header-group  header-default">
                        <div class="header-text httal htvam">
                            <h1 id="header_89" class="form-header" data-component="header" style="text-align: center;">Crea tu cuenta</h1>
                            <br><br>
                            <p>Bienvenido a la familia <i>Maidenware</i>, llena los siguientes campos para poder registrar su usuario y acceder a su <b>Identidad Virtual</b></p>
                        </div>
                    </div>
                </li>

                <!--Aqui la descripción de la sección de arriba-->
                <li id="cid_101" class="form-input-wide" data-type="control_head">
                    <div class="form-header-group  header-small">
                        <div class="header-text httal htvam">
                            <h2 id="header_101" class="form-header" data-component="header">Información de la cuenta</h2>
                        </div>
                        <p>Siguiente sección, inserte su nombre de usuario, su correo y su contraseña.</p>
                    </div>
                </li>
                <!--Datos Personales-->
                <li class="form-line form-line-column form-col-1" data-type="control_fullname" id="Nombre">
                    <div id="cid_3" class="form-input-wide">
                        <div data-wrapper-react="true">
                            <span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">
                                <!--Label e input nombre-->
                                <label id="Nombre" for="Nombre"> Nombre de usuario<b style="color: red;">*</b></label>
                                <br><p style="font-size: 0.8em; line-height: 1.2; margin: 0.5em 0; color: #666;">Es el nombre que utilizarás para identificarte en la plataforma, utiliza de preferencía letras, números, guiones y guiones bajos</p>
                                <br>
                                <input type="text" id="nombre_usuario" name="Nombre de usuario" class="introducetexto" size="10" data-component="first" aria-labelledby="label_3 sublabel_3_first" style="width: 600px;" placeholder="Ingrese su nombre"  required/><br>
                                <span id="username-error" class="error-message"></span>
                            </span>
                           <!---->
                            <span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">

                                <!--Label e input correo-->
                                <label id="Correo" for="Correo"> Correo Electrónico <b style="color: red;">*</b> </label>
                                <br><p style="font-size: 0.8em; line-height: 1.2; margin: 0.5em 0; color: #666;">Introduce una dirección de correo válida para poder recuperar tu cuenta si pierdes acceso</p>
                                <br>
                                <input type="email" id="Correo" name="Correo" class="introducetexto" size="10" data-component="first" aria-labelledby="label_3 sublabel_3_first" style="width: 600px;" placeholder="Ingrese su correo" />
                            </span>

                            <span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">
                                <!--Label e input profesion-->
                                <label id="contrasena" for="contrasena"> Contraseña <b style="color: red;">*</b> </label>
                                <br><p style="font-size: 0.8em; line-height: 1.2; margin: 0.5em 0; color: #666;">Crea una contraseña segura con al menos 8 caracteres, una letra mayuscula, una letra minuscula, un número y un caracter especial.</p><br>
                                <input type="password" id="password" name="contrasena" class="introducetexto" size="10" data-component="first" aria-labelledby="label_3 sublabel_3_first" style="width: 600px;" placeholder="Ingrese su contraseña" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required/>
                            </span>
                            <span class="form-sub-label-container" style="vertical-align:top" data-input-type="first">
                                <!--Label e input profesion-->
                                <label id="contrasena2" for="contrasena2"> Confirmar Contraseña <b style="color: red;">*</b> </label>
                                <br><p style="font-size: 0.8em; line-height: 1.2; margin: 0.5em 0; color: #666;">Vuelva a escribir tu contraseña para confirmar que las has escrito correctamente</p><br>
                                <input type="password" id="confirm-password" name="contrasena2" class="introducetexto" size="10" data-component="first" aria-labelledby="label_3 sublabel_3_first" style="width: 600px;" placeholder="Vuelva a insertar su contraseña" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required/>
                                <label>
                                    <button type="button" onclick="mostrarContrasena()">Mostrar/Ocultar</button>
                                </label>                            </span>
                        </div>
                <li class="form-line" data-type="control_button" id="id_102">
                    <div id="cid_102" class="form-input-wide">
                        <div data-align="auto" class="form-buttons-wrapper form-buttons-auto   jsTest-button-wrapperField"></div>
                    </div>
                    <br><br>
                    <div style="display: flex; justify-content: center;">
                    <div class="wrap"><br>
                        <input type="reset" value="Limpiar datos">
                    <input type="submit" class="btn-outline-primary" value="Probar" id="enviar">
                    
                    <!--Aqui falta -->


                        <!--<a href="#!" class="btn btn-outline-primary">Log In</a>
			 <a href="#!" class="btn btn-primary ms-2 ms-lg-3">Sign Up</a>-->
                      </div>
                      <br>
                </div>
                </li>
            </ul>
        </div>
    </form>
</body>
</html>